<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Income App - Final</title>
    
    <script src='//libtl.com/sdk.js' data-zone='10376289' data-sdk='show_10376289'></script>
    
    <style>
        * { box-sizing: border-box; }
        body { margin: 0; padding: 0; font-family: 'Arial', sans-serif; height: 100vh; background: #000; overflow: hidden; display: flex; flex-direction: column; position: relative; }

        /* ‡¶ù‡¶ø‡¶≤‡¶ø‡¶ï ‡¶Æ‡¶ø‡¶≤‡¶ø‡¶ï ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° */
        .bg-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; background: radial-gradient(circle at 50% 50%, #1a1a2e, #000); }
        .sparkle { position: absolute; width: 3px; height: 3px; border-radius: 50%; animation: twinkle var(--duration) infinite; }
        @keyframes twinkle { 0%, 100% { opacity: 0; transform: scale(0.5); } 50% { opacity: 1; transform: scale(1.2); } }

        /* ‡¶∏‡¶æ‡¶á‡¶®‡¶Ü‡¶™ ‡¶ì ‡¶≤‡¶ó‡¶á‡¶® ‡¶™‡ßá‡¶ú */
        #auth-page { position: fixed; inset: 0; background: #000; z-index: 2000; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .auth-card { background: rgba(255, 255, 255, 0.1); padding: 30px; border-radius: 20px; border: 2px solid #FFD700; width: 100%; text-align: center; backdrop-filter: blur(10px); }

        /* ‡¶Ü‡¶ï‡¶æ‡¶∂‡ßÄ ‡¶π‡ßá‡¶°‡¶æ‡¶∞ */
        .header { padding: 15px; display: flex; align-items: center; background-color: #87CEEB; z-index: 100; border-bottom: 2px solid #fff; }
        .main-logo { width: 45px; height: 45px; border-radius: 50%; border: 2px solid #fff; }
        
        /* ‡¶≤‡¶ó ‡¶Ü‡¶â‡¶ü ‡¶¨‡¶æ‡¶ü‡¶® */
        .logout-btn { background: #ff4d4d; color: white; border: none; padding: 3px 12px; border-radius: 5px; font-size: 10px; cursor: pointer; margin-top: 5px; font-weight: bold; border: 1px solid #fff; }

        .page { flex-grow: 1; display: none; flex-direction: column; align-items: center; z-index: 10; padding: 20px; overflow-y: auto; padding-bottom: 80px; }
        .list-card { background: rgba(255, 255, 255, 0.1); color: #fff; width: 100%; padding: 20px; margin-bottom: 15px; border-radius: 20px; border: 1px solid #FFD700; text-align: center; font-weight: bold; }
        input { width: 100%; padding: 15px; margin: 10px 0; border-radius: 12px; border: none; font-size: 16px; outline: none; background: #fff; }
        .action-btn { background: #FFD700; border: none; padding: 18px; border-radius: 15px; font-weight: bold; width: 100%; cursor: pointer; font-size: 16px; color: #000; }
        .glow-btn { animation: glowEffect 1.5s infinite alternate; }
        @keyframes glowEffect { 0% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.5); } 100% { box-shadow: 0 0 30px #FFD700; } }

        /* ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® */
        .admin-table-container { overflow-x: auto; width: 100%; margin-top: 10px; border-radius: 10px; border: 1px solid #FFD700; }
        .admin-table { width: 100%; border-collapse: collapse; color: #fff; font-size: 11px; background: rgba(255,255,255,0.05); }
        .admin-table th, .admin-table td { border: 1px solid #444; padding: 10px; text-align: center; }
        .admin-table th { background: #FFD700; color: #000; }

        /* ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶∞ */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; display: flex; justify-content: space-around; padding: 10px 0 25px; background: #fff; z-index: 100; }
        .nav-item { text-align: center; flex: 1; cursor: pointer; font-size: 12px; font-weight: bold; color: #333; }

        #custom-alert { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 85%; padding: 25px; background: rgba(0, 0, 0, 0.95); border: 3px solid #FFD700; border-radius: 20px; text-align: center; z-index: 3000; }
    </style>
</head>
<body>

    <div class="bg-container" id="bg-lights"></div>

    <div id="auth-page">
        <div class="auth-card" id="login-box">
            <h2 style="color: #FFD700;">Login</h2>
            <input type="text" id="log-user" placeholder="‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶®‡ßá‡¶Æ">
            <input type="password" id="log-pass" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°">
            <button class="action-btn glow-btn" onclick="login()">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <p style="color: #fff; margin-top: 15px;">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á? <span onclick="toggleAuth()" style="color: #FFD700; cursor: pointer;">‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™</span></p>
        </div>
        <div class="auth-card" id="reg-box" style="display: none;">
            <h2 style="color: #FFD700;">Sign Up</h2>
            <input type="text" id="reg-user" placeholder="‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶®‡ßá‡¶Æ">
            <input type="password" id="reg-pass" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°">
            <button class="action-btn glow-btn" onclick="register()">‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <p style="color: #fff; margin-top: 15px;">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ü‡¶õ‡ßá? <span onclick="toggleAuth()" style="color: #FFD700; cursor: pointer;">‡¶≤‡¶ó‡¶á‡¶®</span></p>
        </div>
    </div>

    <div id="admin-panel" class="page" style="background: #000; display: none; padding-top: 20px;">
        <h2 style="color: #FFD700;">ADMIN PANEL</h2>
        <h3 style="color: #fff;">User Records</h3>
        <div class="admin-table-container">
            <table class="admin-table" id="admin-user-list">
                <thead><tr><th>UID</th><th>Name</th><th>Active</th><th>Refs</th><th>Videos</th><th>Bal</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
        <h3 style="color: #fff; margin-top: 20px;">Withdraw Requests</h3>
        <div class="admin-table-container">
            <table class="admin-table" id="admin-wd-list">
                <thead><tr><th>UID</th><th>Name</th><th>Amount</th><th>Status</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
        <div class="list-card" style="margin-top:20px;">
            <input type="number" id="adm-bal-uid" placeholder="‡¶á‡¶â‡¶ú‡¶æ‡¶∞ UID">
            <input type="number" id="adm-bal-val" placeholder="‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£">
            <button class="action-btn" onclick="adminUpdate()">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
        <button class="action-btn" style="background:red; color:#fff;" onclick="location.reload()">Exit Admin</button>
    </div>

    <div id="main-content" style="display: none; flex-direction: column; height: 100%;">
        <div class="header">
            <img src="https://i.postimg.cc/4yCYtZP7/Gemini-Generated-Image-eql6qzeql6qzeql6.png" class="main-logo">
            <div style="margin-left: 10px; color: #fff;">
                <div id="display-name" style="font-weight: bold;">User Name</div>
                <div id="display-uid" style="font-size: 11px; opacity: 0.8;">UID: 000000</div>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </div>

        <div id="home-page" class="page" style="display: flex;">
            <div class="list-card glow-btn">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: <span id="bal-show">0.00</span> ‡¶ü‡¶æ‡¶ï‡¶æ</div>
            <div id="status-card" class="list-card" style="background: #ff4d4d;">‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: ‡¶Ü‡¶®‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‚ùå</div>
        </div>

        <div id="video-page" class="page">
            <div id="inactive-view">
                <div class="list-card" style="background: #ff4d4d;">‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</div>
                <button class="action-btn glow-btn" onclick="watchActivationAd()">‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® (<span id="act-count">0</span>/10)</button>
            </div>
            <div id="active-view" style="display: none; width: 100%;">
                <button id="v-btn" class="action-btn glow-btn" onclick="showMainVideoAd()">üì∫ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® (‡ß´‡ß¶ ‡¶™‡ßü‡¶∏‡¶æ)</button>
                <div id="timer" style="color: #FFD700; font-weight: bold; margin-top: 15px; display: none; text-align: center;">‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®: 15s</div>
            </div>
        </div>

      

        <div id="withdraw-page" class="page">
            <div class="list-card">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: <span class="bal-val">0.00</span> ‡¶ü‡¶æ‡¶ï‡¶æ</div>
            <input type="number" id="wd-amt" placeholder="‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ (‡ßß‡ß¶‡ß¶+)">
            <button class="action-btn glow-btn" onclick="handleWithdraw()">‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>

        <div class="bottom-nav">
            <div class="nav-item" onclick="showPage('home-page')">üè†<br>‡¶π‡ßã‡¶Æ</div>
            <div class="nav-item" onclick="showPage('video-page')">üì∫<br>‡¶≠‡¶ø‡¶°‡¶ø‡¶ì</div>
            <div class="nav-item" onclick="showPage('withdraw-page')">üí∏<br>‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞</div>
        </div>
    </div>

    <div id="custom-alert">
        <div id="alert-msg" style="color: #fff; font-weight: bold;"></div>
        <button onclick="closeMessage()" style="margin-top: 15px; padding: 10px 20px; background: #FFD700; border: none; border-radius: 10px; cursor: pointer;">OK</button>
    </div>

    <script>
        let users = JSON.parse(localStorage.getItem("premium_v5_db")) || [];
        let wdRequests = JSON.parse(localStorage.getItem("premium_v5_wd")) || [];
        let session = JSON.parse(localStorage.getItem("premium_v5_session")) || null;

        const urlParams = new URLSearchParams(window.location.search);
        const refID = urlParams.get('ref');

        function toggleAuth() {
            document.getElementById('reg-box').style.display = document.getElementById('reg-box').style.display === 'none' ? 'block' : 'none';
            document.getElementById('login-box').style.display = document.getElementById('login-box').style.display === 'none' ? 'block' : 'none';
        }

        function register() {
            let u = document.getElementById('reg-user').value.trim();
            let p = document.getElementById('reg-pass').value.trim();
            if(!u || !p) return alert("Fill all fields!");
            if(users.find(x => x.name === u)) return alert("Username already exists!");

            let newUser = { 
                name: u, pass: p, 
                uid: Math.floor(100000 + Math.random() * 900000), 
                balance: 0, isActive: false, actAds: 0, referrals: 0, videos: 0, 
                bossUID: refID ? parseInt(refID) : null 
            };

            // ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡ß® ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó
            if(newUser.bossUID) {
                let boss = users.find(x => x.uid === newUser.bossUID);
                if(boss) { boss.balance += 2; boss.referrals += 1; }
            }

            users.push(newUser);
            localStorage.setItem("premium_v5_db", JSON.stringify(users));
            alert("Registration Success! Please Login."); toggleAuth();
        }

        function login() {
            let u = document.getElementById('log-user').value.trim();
            let p = document.getElementById('log-pass').value.trim();
            if(u === "ADMIN" && p === "ADMIN2025@") { document.getElementById('auth-page').style.display = 'none'; showAdmin(); return; }
            let user = users.find(x => x.name === u && x.pass === p);
            if(user) { 
                session = user; 
                localStorage.setItem("premium_v5_session", JSON.stringify(session)); 
                startApp(); 
            } else { alert("Wrong username or password!"); }
        }

        function logout() {
            localStorage.removeItem("premium_v5_session");
            location.reload();
        }

        function startApp() { 
            document.getElementById('auth-page').style.display = 'none'; 
            document.getElementById('main-content').style.display = 'flex'; 
            updateUI(); 
        }

        function updateUI() {
            if(!session) return;
            document.getElementById('display-name').innerText = session.name;
            document.getElementById('display-uid').innerText = "UID: " + session.uid;
            document.getElementById('bal-show').innerText = session.balance.toFixed(2);
            document.querySelectorAll('.bal-val').forEach(e => e.innerText = session.balance.toFixed(2));
            document.getElementById('ref-count').innerText = session.referrals;
            document.getElementById('act-count').innerText = session.actAds;
            document.getElementById('ref-link').value = window.location.origin + window.location.pathname + "?ref=" + session.uid;
            
            if(session.isActive) {
                document.getElementById('status-card').innerText = "‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: ‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‚úÖ";
                document.getElementById('status-card').style.background = "#2ecc71";
                document.getElementById('inactive-view').style.display = 'none';
                document.getElementById('active-view').style.display = 'block';
            }
            saveData();
        }

        function handleWithdraw() {
            let amt = parseFloat(document.getElementById('wd-amt').value);
            if(amt < 100) return showMessage("‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡ßß‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
            if(session.balance < amt) return showMessage("‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á‡•§");

            // ‡ßß‡ß¶% ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶ï‡¶Æ‡¶ø‡¶∂‡¶® ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡¶æ‡¶∞‡¶ï‡ßá ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶®
            if(session.bossUID) {
                let boss = users.find(x => x.uid === session.bossUID);
                if(boss) { boss.balance += (amt * 0.10); }
            }

            let req = { uid: session.uid, name: session.name, amount: amt, status: 'Pending' };
            wdRequests.push(req);
            localStorage.setItem("premium_v5_wd", JSON.stringify(wdRequests));
            session.balance -= amt;
            updateUI();
            showMessage("‡¶∏‡¶´‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡¶æ‡¶∞ ‡ßß‡ß¶% ‡¶ï‡¶Æ‡¶ø‡¶∂‡¶® ‡¶™‡ßá‡ßü‡ßá‡¶õ‡ßá‡¶®‡•§");
        }

        function showAdmin() {
            document.getElementById('admin-panel').style.display = 'flex';
            let tbody = document.querySelector("#admin-user-list tbody"); tbody.innerHTML = "";
            users.forEach(u => { tbody.innerHTML += `<tr><td>${u.uid}</td><td>${u.name}</td><td>${u.isActive?'Y':'N'}</td><td>${u.referrals}</td><td>${u.videos}</td><td>${u.balance.toFixed(2)}</td></tr>`; });
            let wdBody = document.querySelector("#admin-wd-list tbody"); wdBody.innerHTML = "";
            wdRequests.forEach(r => { wdBody.innerHTML += `<tr><td>${r.uid}</td><td>${r.name}</td><td>${r.amount}</td><td>${r.status}</td></tr>`; });
        }

        function adminUpdate() {
            let uid = parseInt(document.getElementById('adm-bal-uid').value);
            let val = parseFloat(document.getElementById('adm-bal-val').value);
            let user = users.find(x => x.uid === uid);
            if(user) { user.balance += val; localStorage.setItem("premium_v5_db", JSON.stringify(users)); alert("Balance Updated!"); showAdmin(); }
        }

        function saveData() {
            let idx = users.findIndex(x => x.uid === session.uid);
            if(idx !== -1) { users[idx] = session; localStorage.setItem("premium_v5_db", JSON.stringify(users)); }
        }

        function showPage(id) { document.querySelectorAll('.page').forEach(p => p.style.display = 'none'); document.getElementById(id).style.display = 'flex'; }
        function watchActivationAd() { window.open("https://otieu.com/4/10376309", "_blank"); session.actAds++; if(session.actAds >= 10) session.isActive = true; updateUI(); }
        function showMainVideoAd() { if (typeof show_10376289 === 'function') { show_10376289().then(() => { startTimer(); }); } else { startTimer(); } }
        function startTimer() {
            let btn = document.getElementById('v-btn'); btn.disabled = true; document.getElementById('timer').style.display = 'block';
            let t = 15; let i = setInterval(() => {
                t--; document.getElementById('timer').innerText = `‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®: ${t}s`;
                if(t <= 0) { clearInterval(i); session.balance += 0.50; session.videos++; updateUI(); btn.disabled = false; document.getElementById('timer').style.display = 'none'; showMessage("‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü‡ßá‡¶õ‡ßá!"); }
            }, 1000);
        }

        function showMessage(msg) { document.getElementById('alert-msg').innerText = msg; document.getElementById('custom-alert').style.display = 'block'; }
        function closeMessage() { document.getElementById('custom-alert').style.display = 'none'; }
        function copyRef() { navigator.clipboard.writeText(document.getElementById('ref-link').value); alert("Link Copied!"); }
        
        function createLights() {
            const container = document.getElementById('bg-lights');
            for (let i = 0; i < 40; i++) {
                let l = document.createElement('div'); l.className = 'sparkle'; l.style.left = Math.random() * 100 + '%'; l.style.top = Math.random() * 100 + '%';
                l.style.background = '#FFD700'; l.style.setProperty('--duration', (2 + Math.random() * 3) + 's'); container.appendChild(l);
            }
        }
        createLights(); if(session) startApp();
    </script>
</body>
</html>
